---
import Card from "../common/Card.astro";
import ButtonSecondary from "../common/ButtonSecondary.astro";
import ProvidersSection from "../providers/ProvidersSection.astro";
import FAQSection from "../sections/FAQSection.astro";
import TestimonialsCarousel from "../sections/TestimonialsCarousel.astro";
interface Props { serviceId: string }
const { serviceId } = Astro.props as Props;
const es = await import(`../../content/services/${serviceId}.es.json`).catch(() => ({ default: null }));
const en = await import(`../../content/services/${serviceId}.en.json`).catch(() => ({ default: null }));
const heroImage = es.default?.heroImage ?? en.default?.heroImage ?? null;
const posts = (await import(`../../content/blog/posts.json`)).default.posts;
---
<section class="w-full bg-neuro-title py-12 md:py-16">
  <div class="mx-auto max-w-6xl px-4">
    <div id="sp-hero-es" class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mt-8 md:mt-12">
      <div class="space-y-6 text-center md:text-left">
        <h1 class="font-heading text-white text-3xl md:text-5xl">
          <span class="block text-white/90">Therapy with a</span>
          <span class="block text-white">licensed therapist</span>
        </h1>
        <ul class="space-y-3">
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><path d="M4 12l6 6L20 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="text-white/90">Confidencial y seguro</span>
          </li>
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/><path d="M4 20a8 8 0 0116 0" stroke="currentColor" stroke-width="2"/></svg>
            <span class="text-white/90">Profesionales licenciados</span>
          </li>
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><path d="M12 2l3 7h7l-5.5 4 2 7-6.5-4.5L5.5 20l2-7L2 9h7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
            <span class="text-white/90">Sensibilidad cultural</span>
          </li>
        </ul>
        <div class="flex gap-3 pt-2 justify-center md:justify-start">
          <a href={`${import.meta.env.BASE_URL}book`} class="rounded-4xl bg-neuro-primaryButton text-white px-6 py-3 hover:scale-105 transition-transform">{es.default?.cta?.book ?? 'Agendar ahora'}</a>
        </div>
        <p class="text-white/80">{es.default?.trustNote}</p>
      </div>
      <div class="flex justify-center">
        <img src={heroImage ?? 'https://images.unsplash.com/photo-1520975922284-5cb3f6b38d67?q=80&w=1080&auto=format&fit=crop'} alt="Terapeuta" class="rounded-4xl w-full max-w-md object-cover" />
      </div>
    </div>
    <div id="sp-hero-en" class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mt-8 md:mt-12 hidden">
      <div class="space-y-6 text-center md:text-left">
        <h1 class="font-heading text-white text-3xl md:text-5xl">
          <span class="block text-white/90">Therapy with a</span>
          <span class="block text-white">licensed therapist</span>
        </h1>
        <ul class="space-y-3">
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><path d="M4 12l6 6L20 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="text-white/90">Confidential and safe</span>
          </li>
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/><path d="M4 20a8 8 0 0116 0" stroke="currentColor" stroke-width="2"/></svg>
            <span class="text-white/90">Licensed professionals</span>
          </li>
          <li class="flex items-center gap-3 justify-center md:justify-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" class="text-white"><path d="M12 2l3 7h7l-5.5 4 2 7-6.5-4.5L5.5 20l2-7L2 9h7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
            <span class="text-white/90">Culturally sensitive care</span>
          </li>
        </ul>
        <div class="flex gap-3 pt-2 justify-center md:justify-start">
          <a href={`${import.meta.env.BASE_URL}book`} class="rounded-4xl bg-neuro-primaryButton text-white px-6 py-3 hover:scale-105 transition-transform">{en.default?.cta?.book ?? 'Book now'}</a>
        </div>
        <p class="text-white/80">{en.default?.trustNote}</p>
      </div>
      <div class="flex justify-center">
        <img src={heroImage ?? 'https://images.unsplash.com/photo-1520975922284-5cb3f6b38d67?q=80&w=1080&auto=format&fit=crop'} alt="Therapist" class="rounded-4xl w-full max-w-md object-cover" />
      </div>
    </div>
  </div>
</section>
<div class="mx-auto max-w-6xl px-4 py-10">
  <section class="mt-8">
    <h2 class="font-heading text-neuro-title text-3xl md:text-4xl text-center">Benefits of <span class="text-neuro-secondaryButton">Neurovivir<sup class="text-sm align-super">®</sup></span></h2>
    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      <Card class="bg-neuro-detail hover:translate-y-0">
        <div class="flex flex-col items-center text-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" class="text-neuro-title"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 7v5l3 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="text-neuro-paragraph">Eliminate commute time and scheduling hassles</span>
        </div>
      </Card>
      <Card class="bg-neuro-detail hover:translate-y-0">
        <div class="flex flex-col items-center text-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" class="text-neuro-title"><path d="M12 21s-7-4.35-7-9a4 4 0 018-1 4 4 0 018 1c0 4.65-7 9-7 9z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M3 14h10a3 3 0 013 3v2H6l-3-3z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
          <span class="text-neuro-paragraph">No search for a therapist or long wait for an appointment</span>
        </div>
      </Card>
      <Card class="bg-neuro-detail hover:translate-y-0">
        <div class="flex flex-col items-center text-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" class="text-neuro-title"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="9" r="3" stroke="currentColor" stroke-width="2"/><path d="M6 18a6 6 0 0112 0" stroke="currentColor" stroke-width="2"/></svg>
          <span class="text-neuro-paragraph">Seamlessly switch providers, at no extra cost</span>
        </div>
      </Card>
      <Card class="bg-neuro-detail hover:translate-y-0">
        <div class="flex flex-col items-center text-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" class="text-neuro-title"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 7v2M12 15v2M10 11h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <span class="text-neuro-paragraph">Receive affordable, high-quality mental health care</span>
        </div>
      </Card>
    </div>
  </section>
  <section class="mt-10 rounded-4xl bg-neuro-detail p-6 md:p-8">
    <h2 class="font-heading text-neuro-title text-3xl md:text-4xl text-center">Your path to care, simplified</h2>
    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="bg-yellow-100 p-4">
        <img src="https://picsum.photos/seed/step1/480/320" alt="Step 1" class="w-full h-40 object-cover" />
        <h3 class="mt-3 font-heading text-neuro-title text-lg">Check eligibility</h3>
        <p class="text-neuro-paragraph">Confirm coverage and share a bit about your needs.</p>
      </div>
      <div class="bg-orange-100 p-4">
        <img src="https://picsum.photos/seed/step2/480/320" alt="Step 2" class="w-full h-40 object-cover" />
        <h3 class="mt-3 font-heading text-neuro-title text-lg">Get matched</h3>
        <p class="text-neuro-paragraph">We pair you with a licensed therapist suited to your goals.</p>
      </div>
      <div class="bg-green-100 p-4">
        <img src="https://picsum.photos/seed/step3/480/320" alt="Step 3" class="w-full h-40 object-cover" />
        <h3 class="mt-3 font-heading text-neuro-title text-lg">Start sessions</h3>
        <p class="text-neuro-paragraph">Begin therapy over video, voice or chat—on your schedule.</p>
      </div>
    </div>
    <div class="mt-6 flex justify-center">
      <ButtonSecondary href={`${import.meta.env.BASE_URL}eligibility`} label="Check elegibity" />
    </div>
  </section>
  
  <ProvidersSection posts={posts} />

  

  <div id="sp-faq-es">
    <FAQSection title="FAQ" items={(es.default?.faq ?? [])} />
  </div>
  <div id="sp-faq-en" class="hidden">
    <FAQSection title="FAQ" items={(en.default?.faq ?? [])} />
  </div>

  <TestimonialsCarousel />

  <section class="mt-10 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
    <div id="sp-cta-es">
      <h3 class="font-heading text-neuro-title">¿Listo para agendar?</h3>
      <p class="text-neuro-paragraph">{es.default?.emergencyNote}</p>
    </div>
    <div id="sp-cta-en" class="hidden">
      <h3 class="font-heading text-neuro-title">Ready to book?</h3>
      <p class="text-neuro-paragraph">{en.default?.emergencyNote}</p>
    </div>
    <div class="flex gap-3">
      <a href={`${import.meta.env.BASE_URL}book`} class="rounded-4xl bg-neuro-primaryButton text-white px-6 py-3 hover:scale-105 transition-transform">{es.default?.cta?.book ?? 'Agendar ahora'}</a>
      <a href={`${import.meta.env.BASE_URL}intake`} class="rounded-4xl bg-neuro-secondaryButton text-white px-6 py-3 hover:scale-105 transition-transform">{es.default?.cta?.intake ?? 'Completar intake'}</a>
    </div>
  </section>

  <script type="module">
    import { initLang, getLang, onLangChange } from "/src/lib/i18n/languageStore.ts";
    initLang();
    const blocksEs = ['sp-hero-es','sp-faq-es','sp-cta-es'];
    const blocksEn = ['sp-hero-en','sp-faq-en','sp-cta-en'];
    const setVisible = (ids, visible) => ids.forEach(id => {
      document.getElementById(id)?.classList.toggle('hidden', !visible);
    });
    const update = (lang) => {
      setVisible(blocksEs, lang === 'es');
      setVisible(blocksEn, lang === 'en');
    };
    update(getLang());
    onLangChange(update);
  </script>
</div>
